# 🦔 什錦雜貨鋪 ETF - 未來功能規劃

## 🎯 高優先度

### 1. 投資組合總值歷史圖表
- **描述**：在圖表頁面實作真正的投資組合總值走勢圖
- **實作方式**：方案 A - 即時計算（無需 Database）
  - 並行抓取所有股票的歷史資料
  - 後端計算每天的總值並繪製圖表
  - 實際載入時間：357ms（並行請求）
- **狀態**：✅ 已完成
- **功能**：
  - 支援 1 個月、3 個月、6 個月、1 年時間範圍
  - 從 ETF 起始日期 2024-05-30 開始計算
  - 使用日期交集確保資料完整性（只顯示所有股票都有資料的日期）

### 2. 持股拖拽排序功能
- **描述**：允許使用者自訂持股表格的顯示順序
- **技術需求**：
  - 安裝 `@dnd-kit/core` 和 `@dnd-kit/sortable`
  - 使用 localStorage 儲存排序設定
  - 將 Dashboard 改為 Client Component
- **狀態**：待確認
- **注意事項**：會影響 SSR 效能，需評估影響

### 3. 智慧更新機制
- **描述**：根據市場開盤狀態自動調整更新頻率
- **更新策略**：
  - 台股/美股開市中：每 5 分鐘更新
  - 收盤後：每 30 分鐘更新
  - 週末：暫停自動更新
- **技術方案**：
  - 改用 Client Component + setInterval
  - 根據 `getMarketStatus()` 動態調整頻率
- **狀態**：待評估
- **優缺點**：
  - ✅ 更即時的資料
  - ❌ 無法利用 Next.js SSR 快取
  - ❌ 增加 API 請求次數

## 🔧 中優先度

### 4. 更多歷史資料範圍
- **描述**：支援更長時間的歷史資料查詢
- **實作內容**：
  - 新增 2 年、5 年、全部時間選項
  - 使用 Yahoo Finance `range=max` 參數
- **狀態**：✅ 已完成（1個月、3個月、6個月、1年）
- **待擴充**：可再增加更長時間範圍

### 5. 資料匯出功能
- **描述**：允許使用者匯出持股資料
- **支援格式**：CSV, Excel, PDF
- **狀態**：待開發

### 6. 價格警示通知
- **描述**：當股價達到設定值時發送通知
- **技術需求**：
  - Web Push API 或 Email 通知
  - 需要後端服務定期檢查價格
- **狀態**：待評估

## 💡 低優先度

### 7. 多投資組合支援
- **描述**：允許使用者建立並切換多個投資組合
- **儲存方式**：localStorage 或 Database
- **狀態**：待評估

### 8. 深色模式
- **描述**：支援深色主題
- **技術方案**：使用 next-themes
- **狀態**：待開發

### 9. 行動 App (PWA)
- **描述**：支援 Progressive Web App
- **功能**：
  - 可安裝到手機桌面
  - 離線快取
  - 推播通知
- **狀態**：待評估

### 10. 效能分析圖表
- **描述**：顯示投資組合效能指標
- **指標內容**：
  - 年化報酬率
  - 夏普比率
  - 最大回撤
  - 與大盤比較
- **狀態**：待開發

## 📊 數據相關

### 11. 更多資料來源
- **描述**：整合更多股票市場資料
- **可能新增**：
  - 港股
  - 日股
  - 以太幣等其他加密貨幣
  - 更多台股標的
  - 國際 ETF
- **狀態**：待評估

### 11-1. 大盤比較功能
- **描述**：將投資組合表現與大盤指數比較
- **可能指標**：
  - 台灣加權指數 (TAIEX)
  - S&P 500
  - NASDAQ
- **顯示方式**：
  - 在投資組合圖表上疊加大盤走勢
  - 顯示相對表現（跑贏/跑輸大盤）
  - 計算 Beta 值和相關性
- **狀態**：待開發

### 12. 股息追蹤
- **描述**：記錄並顯示股息收入
- **功能**：
  - 手動輸入股息記錄
  - 計算總股息收益
  - 股息再投資模擬
- **狀態**：待開發

## 🎨 UI/UX 改進

### 13. UI 設計細節優化
- **描述**：優化整體視覺設計和使用者體驗
- **可能改進項目**：
  - 卡片陰影和間距調整
  - 按鈕 hover 效果優化
  - 顏色對比度提升
  - 字體大小和行距調整
  - 表格行高和間距優化
- **狀態**：待優化

### 14. 響應式圖表優化
- **描述**：改善行動裝置上的圖表顯示
- **狀態**：待優化

### 15. 動畫效果
- **描述**：加入流暢的過場動畫
- **使用套件**：Framer Motion
- **狀態**：待評估

### 16. 歷史數據密集度優化
- **描述**：優化圖表資料點的顯示密集程度
- **可能方案**：
  - 根據時間範圍自動調整資料採樣間隔
  - 1 個月：每日資料點
  - 3 個月：每 2-3 天一個資料點
  - 1 年：每週資料點
  - 或使用圖表庫的自動稀疏化功能
- **狀態**：待評估

---

## 📝 備註

- 此文件會持續更新
- 每個功能在開發前都應評估必要性和優先級
- 優先考慮 MVP (Minimum Viable Product) 原則
- 保持程式碼簡潔，避免過度工程化

最後更新：2025-12-30
